<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>About the Merlin Directed Acyclic Graph &mdash; Merlin  documentation</title><link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/mystnb.css" type="text/css" />
      <link rel="stylesheet" href="_static/togglebutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
    <link rel="canonical" href="https://nvidia-merlin.github.io/Merlin/main/about-dag.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script >let toggleHintShow = 'Click to show';</script>
        <script >let toggleHintHide = 'Click to hide';</script>
        <script >let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js"></script>
        <script >var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="About the Merlin Dataset" href="about-dataset.html" />
    <link rel="prev" title="Merlin Technical Concepts" href="technical-concepts.html" /> 
</head>

<body class="wy-body-for-nav">
  <div class="banner">
    <p class="banner">
      Beginning in January 2023, versions for all NVIDIA Merlin projects
      will change from semantic versioning like <code>4.0</code>
      to calendar versioning like <code>23.01</code>.</p>
  </div>

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Merlin
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="README.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Example Notebooks</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="technical-concepts.html">Merlin Technical Concepts</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Graph Concepts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#graph-terminology">Graph Terminology</a></li>
<li class="toctree-l3"><a class="reference internal" href="#understanding-operators-columns-nodes-and-schema">Understanding Operators, Columns, Nodes, and Schema</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="about-dataset.html">About the Merlin Dataset</a></li>
<li class="toctree-l2"><a class="reference internal" href="about-schema.html">About the Merlin Schema</a></li>
<li class="toctree-l2"><a class="reference internal" href="about-operators.html">About Merlin Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="about-model-blocks.html">About Merlin Model Blocks</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="containers.html">Merlin Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="support_matrix/index.html">Merlin Support Matrix</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Merlin</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="technical-concepts.html">Merlin Technical Concepts</a></li>
      <li class="breadcrumb-item active">About the Merlin Directed Acyclic Graph</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="about-the-merlin-directed-acyclic-graph">
<h1>About the Merlin Directed Acyclic Graph<a class="headerlink" href="#about-the-merlin-directed-acyclic-graph" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#graph-terminology" id="id1">Graph Terminology</a></p></li>
<li><p><a class="reference internal" href="#understanding-operators-columns-nodes-and-schema" id="id2">Understanding Operators, Columns, Nodes, and Schema</a></p></li>
</ul>
</div>
<p>Merlin uses a directed acyclic graph (DAG) to represent operations on data such as filtering or bucketing and to represent operations in a recommender system such as creating an ensemble or filtering candidate items during inference.</p>
<p>Understanding the Merlin DAG is helpful if you want to develop your own operator (Op) or building a recommender system with Merlin.</p>
<div class="section" id="graph-terminology">
<h2>Graph Terminology<a class="headerlink" href="#graph-terminology" title="Permalink to this headline"></a></h2>
<dl class="simple myst">
<dt>node</dt><dd><p>A node in the DAG is a group of columns and at least one <em>operator</em>.
The columns are specified with a <em>column selector</em>.
A node has an <em>input schema</em> and an <em>output schema</em>.
Resolution of the schemas is delayed until you run <code class="docutils literal notranslate"><span class="pre">fit</span></code> or <code class="docutils literal notranslate"><span class="pre">transform</span></code> on a dataset.</p>
</dd>
<dt>column selector</dt><dd><p>A column selector specifies the columns to select from a dataset using column names or <em>tags</em>.</p>
</dd>
<dt>operator</dt><dd><p>An operator performs a transformation on data and return a new <em>node</em>.
The data is identified by the <em>column selector</em>.
Some simple operators like <code class="docutils literal notranslate"><span class="pre">+</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> add or remove columns.
More complex operations are applied by shifting the operators onto the column selector with the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> notation.</p>
</dd>
<dt>schema</dt><dd><p>A Merlin schema is metadata that describes the columns in a dataset.
Each column has its own schema that identifies the column name and can specify <em>tags</em> and properties.</p>
</dd>
<dt>tag</dt><dd><p>A Merlin tag categorizes information about a column.
Adding a tag to a column enables you to select columns for operations by tag rather than name.</p>
<p>For example, you can add the <code class="docutils literal notranslate"><span class="pre">USER</span></code> and <code class="docutils literal notranslate"><span class="pre">ITEM</span></code> tags to columns.
Modeling and inference operations can use that information to act accordingly on the dataset.</p>
</dd>
</dl>
</div>
<div class="section" id="understanding-operators-columns-nodes-and-schema">
<h2>Understanding Operators, Columns, Nodes, and Schema<a class="headerlink" href="#understanding-operators-columns-nodes-and-schema" title="Permalink to this headline"></a></h2>
<p>Merlin enables you to chain together Operators with the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> syntax to create feature-processing workflows.
The <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> syntax means “take the output of the left-hand side and feed it into the input of the right-hand side.”</p>
<p>You can specify an explicit list of columns to run an Operator on just the specified columns.
The following code block shows the syntax for explicit column names:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;col1&quot;</span><span class="p">,</span> <span class="s2">&quot;col2&quot;</span><span class="p">,]</span> <span class="o">&gt;&gt;</span> <span class="n">SomeOperator</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Or, you can use the <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code> syntax between Operators to run one Operator on all the output columns from the preceding Operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">AnOperator</span><span class="p">(</span><span class="o">...</span><span class="p">)</span> <span class="o">&gt;&gt;</span> <span class="n">OtherOperator</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>Chaining Operators together builds a graph.
The following figure shows how each node in the graph has an Operator.</p>
<p><img alt="A directed graph with two nodes. The first node is a Selection Operator and selects columns &quot;col1&quot; and &quot;col2.&quot; The second node receives the two columns as its input. The second node has a fictional SomeOperator Operator." src="_images/graph_simple.svg" /></p>
<p>Each node in a graph has an input schema and an output schema that describe the columns that go into an Operator and the columns that go out of an Operator.
The following figure represents an Operator that adds <code class="docutils literal notranslate"><span class="pre">colB</span></code> to a dataset.</p>
<p><img alt="Part of a directed graph that shows the input schema to a fictional SomeOperator Operator as &quot;colA&quot;. The fictional Operator adds adds &quot;colB&quot; and the result is an output schema with &quot;colA&quot; and &quot;colB.&quot;" src="_images/graph_schema.svg" /></p>
<p>In practice, the workflow does not know which columns are processed or produced immediately when Merlin builds the graph.
This is for two reasons:</p>
<ol class="arabic">
<li><p>Merlin enables you to build graphs that process categories of columns.
The categories are specified by <em>tags</em> instead of an explicit list of column names.</p>
<p>For example, you can select the continuous columns from your dataset with code like the following example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Tags</span><span class="o">.</span><span class="n">CONTINUOUS</span><span class="p">]</span> <span class="o">&gt;&gt;</span> <span class="n">Operator</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>You can chain Operators together into a graph, such as an NVTabular workflow, before you specify a dataset.
The graph, Operators, and schema do not know which columns will be selected by tag until the software accesses the dataset and determines the column names.</p></li>
</ol>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="technical-concepts.html" class="btn btn-neutral float-left" title="Merlin Technical Concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="about-dataset.html" class="btn btn-neutral float-right" title="About the Merlin Dataset" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, NVIDIA.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-NVJ1Y1YJHK"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-NVJ1Y1YJHK', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>